{"ast":null,"code":"var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useTimingTransition = exports.useSpringTransition = exports.useTransition = exports.withTimingTransition = exports.withSpringTransition = exports.withTransition = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = require(\"react\");\n\nvar _reactNativeReanimated = _interopRequireWildcard(require(\"react-native-reanimated\"));\n\nvar _Hooks = require(\"./Hooks\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar Value = _reactNativeReanimated.default.Value,\n    cond = _reactNativeReanimated.default.cond,\n    block = _reactNativeReanimated.default.block,\n    set = _reactNativeReanimated.default.set,\n    Clock = _reactNativeReanimated.default.Clock,\n    spring = _reactNativeReanimated.default.spring,\n    startClock = _reactNativeReanimated.default.startClock,\n    stopClock = _reactNativeReanimated.default.stopClock,\n    timing = _reactNativeReanimated.default.timing,\n    neq = _reactNativeReanimated.default.neq,\n    SpringUtils = _reactNativeReanimated.default.SpringUtils;\nvar defaultSpringConfig = SpringUtils.makeDefaultConfig();\n\nvar withTransition = function withTransition(value) {\n  var timingConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var init = new Value(0);\n  var clock = new Clock();\n  var state = {\n    finished: new Value(0),\n    frameTime: new Value(0),\n    position: new Value(0),\n    time: new Value(0)\n  };\n\n  var config = _objectSpread({\n    toValue: new Value(0),\n    duration: 150,\n    easing: function easing(v) {\n      return (0, _reactNativeReanimated.add)(v, 0);\n    }\n  }, timingConfig);\n\n  return block([cond((0, _reactNativeReanimated.not)(init), [set(init, 1), set(state.position, value)]), cond(neq(config.toValue, value), [set(state.frameTime, 0), set(state.time, 0), set(state.finished, 0), set(config.toValue, value), startClock(clock)]), timing(clock, state, config), cond(state.finished, stopClock(clock)), state.position]);\n};\n\nexports.withTransition = withTransition;\n\nvar withSpringTransition = function withSpringTransition(value) {\n  var springConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultSpringConfig;\n  var velocity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var init = new Value(0);\n  var clock = new Clock();\n  var state = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0)\n  };\n\n  var config = _objectSpread({\n    toValue: new Value(0),\n    damping: 15,\n    mass: 1,\n    stiffness: 150,\n    overshootClamping: false,\n    restSpeedThreshold: 1,\n    restDisplacementThreshold: 1\n  }, springConfig);\n\n  return block([cond((0, _reactNativeReanimated.not)(init), [set(init, 1), set(state.position, value)]), cond(neq(config.toValue, value), [set(state.velocity, velocity), set(state.time, 0), set(state.finished, 0), set(config.toValue, value), startClock(clock)]), spring(clock, state, config), cond(state.finished, stopClock(clock)), state.position]);\n};\n\nexports.withSpringTransition = withSpringTransition;\nvar withTimingTransition = withTransition;\nexports.withTimingTransition = withTimingTransition;\n\nvar useTransition = function useTransition(state) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var value = (0, _Hooks.useConst)(function () {\n    return new Value(0);\n  });\n  (0, _react.useEffect)(function () {\n    value.setValue(typeof state === \"boolean\" ? state ? 1 : 0 : state);\n  }, [value, state]);\n  var transition = (0, _Hooks.useConst)(function () {\n    return withTransition(value, config);\n  });\n  return transition;\n};\n\nexports.useTransition = useTransition;\n\nvar useSpringTransition = function useSpringTransition(state) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultSpringConfig;\n  var value = (0, _Hooks.useConst)(function () {\n    return new Value(0);\n  });\n  (0, _react.useEffect)(function () {\n    value.setValue(typeof state === \"boolean\" ? state ? 1 : 0 : state);\n  }, [value, state]);\n  var transition = (0, _Hooks.useConst)(function () {\n    return withSpringTransition(value, config);\n  });\n  return transition;\n};\n\nexports.useSpringTransition = useSpringTransition;\nvar useTimingTransition = useTransition;\nexports.useTimingTransition = useTimingTransition;","map":{"version":3,"sources":["Transitions.ts"],"names":["Value","cond","block","set","Clock","spring","startClock","stopClock","timing","neq","SpringUtils","Animated","defaultSpringConfig","withTransition","timingConfig","init","clock","state","finished","frameTime","position","time","config","toValue","duration","easing","add","not","withSpringTransition","springConfig","velocity","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","withTimingTransition","useTransition","value","useConst","useEffect","transition","useSpringTransition","useTimingTransition"],"mappings":"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","sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { useEffect } from \"react\";\nimport Animated, { not, add } from \"react-native-reanimated\";\n\nimport { SpringConfig, TimingConfig } from \"./Animations\";\nimport { useConst } from \"./Hooks\";\n\nconst {\n  Value,\n  cond,\n  block,\n  set,\n  Clock,\n  spring,\n  startClock,\n  stopClock,\n  timing,\n  neq,\n  SpringUtils,\n} = Animated;\n\nconst defaultSpringConfig = SpringUtils.makeDefaultConfig();\n\nexport const withTransition = (\n  value: Animated.Node<number>,\n  timingConfig: TimingConfig = {}\n) => {\n  const init = new Value(0);\n  const clock = new Clock();\n  const state = {\n    finished: new Value(0),\n    frameTime: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  };\n  const config = {\n    toValue: new Value(0),\n    duration: 150,\n    easing: (v: Animated.Adaptable<number>) => add(v, 0),\n    ...timingConfig,\n  };\n  return block([\n    cond(not(init), [set(init, 1), set(state.position, value)]),\n    cond(neq(config.toValue, value), [\n      set(state.frameTime, 0),\n      set(state.time, 0),\n      set(state.finished, 0),\n      set(config.toValue, value),\n      startClock(clock),\n    ]),\n    timing(clock, state, config),\n    cond(state.finished, stopClock(clock)),\n    state.position,\n  ]);\n};\n\nexport const withSpringTransition = (\n  value: Animated.Node<number>,\n  springConfig: SpringConfig = defaultSpringConfig,\n  velocity: Animated.Adaptable<number> = 0\n) => {\n  const init = new Value(0);\n  const clock = new Clock();\n  const state = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  };\n  const config = {\n    toValue: new Value(0),\n    damping: 15,\n    mass: 1,\n    stiffness: 150,\n    overshootClamping: false,\n    restSpeedThreshold: 1,\n    restDisplacementThreshold: 1,\n    ...springConfig,\n  };\n  return block([\n    cond(not(init), [set(init, 1), set(state.position, value)]),\n    cond(neq(config.toValue, value), [\n      set(state.velocity, velocity),\n      set(state.time, 0),\n      set(state.finished, 0),\n      set(config.toValue, value),\n      startClock(clock),\n    ]),\n    spring(clock, state, config),\n    cond(state.finished, stopClock(clock)),\n    state.position,\n  ]);\n};\n\nexport const withTimingTransition = withTransition;\n\nexport const useTransition = (\n  state: boolean | number,\n  config: TimingConfig = {}\n) => {\n  const value: Animated.Value<number> = useConst(() => new Value(0));\n  useEffect(() => {\n    value.setValue(typeof state === \"boolean\" ? (state ? 1 : 0) : state);\n  }, [value, state]);\n  const transition = useConst(() => withTransition(value, config));\n  return transition;\n};\n\nexport const useSpringTransition = (\n  state: boolean | number,\n  config: SpringConfig = defaultSpringConfig\n) => {\n  const value: Animated.Value<number> = useConst(() => new Value(0));\n\n  useEffect(() => {\n    value.setValue(typeof state === \"boolean\" ? (state ? 1 : 0) : state);\n  }, [value, state]);\n\n  const transition = useConst(() => withSpringTransition(value, config));\n  return transition;\n};\n\nexport const useTimingTransition = useTransition;\n"]},"metadata":{},"sourceType":"script"}