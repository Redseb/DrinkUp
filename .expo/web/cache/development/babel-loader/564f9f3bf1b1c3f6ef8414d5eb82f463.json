{"ast":null,"code":"var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.processTransform3d = exports.multiply4 = exports.matrixVecMul4 = exports.dot4 = exports.identityMatrix4 = void 0;\n\nvar _reactNativeReanimated = _interopRequireWildcard(require(\"react-native-reanimated\"));\n\nvar add = _reactNativeReanimated.default.add,\n    multiply = _reactNativeReanimated.default.multiply,\n    cos = _reactNativeReanimated.default.cos,\n    sin = _reactNativeReanimated.default.sin,\n    divide = _reactNativeReanimated.default.divide;\n\nvar exhaustiveCheck = function exhaustiveCheck(a) {\n  throw new Error(\"Unexhaustive handling for \" + a);\n};\n\nvar identityMatrix4 = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\nexports.identityMatrix4 = identityMatrix4;\n\nvar translateXMatrix = function translateXMatrix(x) {\n  return [[1, 0, 0, x], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n};\n\nvar translateYMatrix = function translateYMatrix(y) {\n  return [[1, 0, 0, 0], [0, 1, 0, y], [0, 0, 1, 0], [0, 0, 0, 1]];\n};\n\nvar translateZMatrix = function translateZMatrix(z) {\n  return [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, z], [0, 0, 0, 1]];\n};\n\nvar scaleMatrix = function scaleMatrix(s) {\n  return [[s, 0, 0, 0], [0, s, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n};\n\nvar scaleXMatrix = function scaleXMatrix(s) {\n  return [[s, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n};\n\nvar skewXMatrix = function skewXMatrix(s) {\n  return [[1, (0, _reactNativeReanimated.tan)(s), 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n};\n\nvar skewYMatrix = function skewYMatrix(s) {\n  return [[1, 0, 0, 0], [(0, _reactNativeReanimated.tan)(s), 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n};\n\nvar scaleYMatrix = function scaleYMatrix(s) {\n  return [[1, 0, 0, 0], [0, s, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n};\n\nvar perspectiveMatrix = function perspectiveMatrix(p) {\n  return [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, divide(-1, p), 1]];\n};\n\nvar rotateXMatrix = function rotateXMatrix(r) {\n  return [[1, 0, 0, 0], [0, cos(r), multiply(-1, sin(r)), 0], [0, sin(r), cos(r), 0], [0, 0, 0, 1]];\n};\n\nvar rotateYMatrix = function rotateYMatrix(r) {\n  return [[cos(r), 0, sin(r), 0], [0, 1, 0, 0], [multiply(-1, sin(r)), 0, cos(r), 0], [0, 0, 0, 1]];\n};\n\nvar rotateZMatrix = function rotateZMatrix(r) {\n  return [[cos(r), multiply(-1, sin(r)), 0, 0], [sin(r), cos(r), 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n};\n\nvar dot4 = function dot4(row, col) {\n  return add(multiply(row[0], col[0]), multiply(row[1], col[1]), multiply(row[2], col[2]), multiply(row[3], col[3]));\n};\n\nexports.dot4 = dot4;\n\nvar matrixVecMul4 = function matrixVecMul4(m, v) {\n  return [dot4(m[0], v), dot4(m[1], v), dot4(m[2], v), dot4(m[3], v)];\n};\n\nexports.matrixVecMul4 = matrixVecMul4;\n\nvar multiply4 = function multiply4(m1, m2) {\n  var col0 = [m2[0][0], m2[1][0], m2[2][0], m2[3][0]];\n  var col1 = [m2[0][1], m2[1][1], m2[2][1], m2[3][1]];\n  var col2 = [m2[0][2], m2[1][2], m2[2][2], m2[3][2]];\n  var col3 = [m2[0][3], m2[1][3], m2[2][3], m2[3][3]];\n  return [[dot4(m1[0], col0), dot4(m1[0], col1), dot4(m1[0], col2), dot4(m1[0], col3)], [dot4(m1[1], col0), dot4(m1[1], col1), dot4(m1[1], col2), dot4(m1[1], col3)], [dot4(m1[2], col0), dot4(m1[2], col1), dot4(m1[2], col2), dot4(m1[2], col3)], [dot4(m1[3], col0), dot4(m1[3], col1), dot4(m1[3], col2), dot4(m1[3], col3)]];\n};\n\nexports.multiply4 = multiply4;\n\nvar processTransform3d = function processTransform3d(transforms) {\n  return transforms.reduce(function (acc, transform) {\n    var key = Object.keys(transform)[0];\n\n    if (key === \"translateX\") {\n      var value = transform[key];\n      return multiply4(acc, translateXMatrix(value));\n    }\n\n    if (key === \"translateY\") {\n      var _value = transform[key];\n      return multiply4(acc, translateYMatrix(_value));\n    }\n\n    if (key === \"translateZ\") {\n      var _value2 = transform[key];\n      return multiply4(acc, translateZMatrix(_value2));\n    }\n\n    if (key === \"scale\") {\n      var _value3 = transform[key];\n      return multiply4(acc, scaleMatrix(_value3));\n    }\n\n    if (key === \"scaleX\") {\n      var _value4 = transform[key];\n      return multiply4(acc, scaleXMatrix(_value4));\n    }\n\n    if (key === \"scaleY\") {\n      var _value5 = transform[key];\n      return multiply4(acc, scaleYMatrix(_value5));\n    }\n\n    if (key === \"skewX\") {\n      var _value6 = transform[key];\n      return multiply4(acc, skewXMatrix(_value6));\n    }\n\n    if (key === \"skewY\") {\n      var _value7 = transform[key];\n      return multiply4(acc, skewYMatrix(_value7));\n    }\n\n    if (key === \"rotateX\") {\n      var _value8 = transform[key];\n      return multiply4(acc, rotateXMatrix(_value8));\n    }\n\n    if (key === \"rotateY\") {\n      var _value9 = transform[key];\n      return multiply4(acc, rotateYMatrix(_value9));\n    }\n\n    if (key === \"perspective\") {\n      var _value10 = transform[key];\n      return multiply4(acc, perspectiveMatrix(_value10));\n    }\n\n    if (key === \"rotate\" || key === \"rotateZ\") {\n      var _value11 = transform[key];\n      return multiply4(acc, rotateZMatrix(_value11));\n    }\n\n    if (key === \"matrix\") {\n      var matrix = transform[key];\n      return multiply4(acc, matrix);\n    }\n\n    return exhaustiveCheck(key);\n  }, identityMatrix4);\n};\n\nexports.processTransform3d = processTransform3d;","map":{"version":3,"sources":["Matrix4.ts"],"names":["add","multiply","cos","sin","divide","Animated","exhaustiveCheck","identityMatrix4","translateXMatrix","translateYMatrix","translateZMatrix","scaleMatrix","scaleXMatrix","skewXMatrix","tan","skewYMatrix","scaleYMatrix","perspectiveMatrix","rotateXMatrix","rotateYMatrix","rotateZMatrix","dot4","row","col","matrixVecMul4","m","multiply4","col0","m2","col1","col2","col3","m1","processTransform3d","transforms","key","Object","value","transform","matrix"],"mappings":"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","sourcesContent":["import Animated, { tan } from \"react-native-reanimated\";\n\nconst { add, multiply, cos, sin, divide } = Animated;\n\nexport type Vec4 = readonly [\n  Animated.Adaptable<number>,\n  Animated.Adaptable<number>,\n  Animated.Adaptable<number>,\n  Animated.Adaptable<number>\n];\n\nexport type Matrix4 = readonly [Vec4, Vec4, Vec4, Vec4];\n\ntype Transform3dName =\n  | \"translateX\"\n  | \"translateY\"\n  | \"translateZ\"\n  | \"scale\"\n  | \"scaleX\"\n  | \"scaleY\"\n  | \"skewX\"\n  | \"skewY\"\n  | \"rotateZ\"\n  | \"rotate\"\n  | \"perspective\"\n  | \"rotateX\"\n  | \"rotateY\"\n  | \"rotateZ\"\n  | \"matrix\";\ntype Transformations = {\n  [Name in Transform3dName]: Name extends \"matrix\"\n    ? Matrix4\n    : Animated.Adaptable<number>;\n};\nexport type Transforms3d = (\n  | Pick<Transformations, \"translateX\">\n  | Pick<Transformations, \"translateY\">\n  | Pick<Transformations, \"translateZ\">\n  | Pick<Transformations, \"scale\">\n  | Pick<Transformations, \"scaleX\">\n  | Pick<Transformations, \"scaleY\">\n  | Pick<Transformations, \"skewX\">\n  | Pick<Transformations, \"skewY\">\n  | Pick<Transformations, \"perspective\">\n  | Pick<Transformations, \"rotateX\">\n  | Pick<Transformations, \"rotateY\">\n  | Pick<Transformations, \"rotateZ\">\n  | Pick<Transformations, \"rotate\">\n  | Pick<Transformations, \"matrix\">\n)[];\n\nconst exhaustiveCheck = (a: never): never => {\n  throw new Error(`Unexhaustive handling for ${a}`);\n};\n\nexport const identityMatrix4: Matrix4 = [\n  [1, 0, 0, 0],\n  [0, 1, 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nconst translateXMatrix = (x: Animated.Adaptable<number>): Matrix4 => [\n  [1, 0, 0, x],\n  [0, 1, 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nconst translateYMatrix = (y: Animated.Adaptable<number>): Matrix4 => [\n  [1, 0, 0, 0],\n  [0, 1, 0, y],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nconst translateZMatrix = (z: Animated.Adaptable<number>): Matrix4 => [\n  [1, 0, 0, 0],\n  [0, 1, 0, 0],\n  [0, 0, 1, z],\n  [0, 0, 0, 1],\n];\n\nconst scaleMatrix = (s: Animated.Adaptable<number>): Matrix4 => [\n  [s, 0, 0, 0],\n  [0, s, 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nconst scaleXMatrix = (s: Animated.Adaptable<number>): Matrix4 => [\n  [s, 0, 0, 0],\n  [0, 1, 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nconst skewXMatrix = (s: Animated.Adaptable<number>): Matrix4 => [\n  [1, tan(s), 0, 0],\n  [0, 1, 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nconst skewYMatrix = (s: Animated.Adaptable<number>): Matrix4 => [\n  [1, 0, 0, 0],\n  [tan(s), 1, 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nconst scaleYMatrix = (s: Animated.Adaptable<number>): Matrix4 => [\n  [1, 0, 0, 0],\n  [0, s, 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nconst perspectiveMatrix = (p: Animated.Adaptable<number>): Matrix4 => [\n  [1, 0, 0, 0],\n  [0, 1, 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, divide(-1, p), 1],\n];\n\nconst rotateXMatrix = (r: Animated.Adaptable<number>): Matrix4 => [\n  [1, 0, 0, 0],\n  [0, cos(r), multiply(-1, sin(r)), 0],\n  [0, sin(r), cos(r), 0],\n  [0, 0, 0, 1],\n];\n\nconst rotateYMatrix = (r: Animated.Adaptable<number>): Matrix4 => [\n  [cos(r), 0, sin(r), 0],\n  [0, 1, 0, 0],\n  [multiply(-1, sin(r)), 0, cos(r), 0],\n  [0, 0, 0, 1],\n];\n\nconst rotateZMatrix = (r: Animated.Adaptable<number>): Matrix4 => [\n  [cos(r), multiply(-1, sin(r)), 0, 0],\n  [sin(r), cos(r), 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nexport const dot4 = (row: Vec4, col: Vec4) => {\n  return add(\n    multiply(row[0], col[0]),\n    multiply(row[1], col[1]),\n    multiply(row[2], col[2]),\n    multiply(row[3], col[3])\n  );\n};\n\nexport const matrixVecMul4 = (m: Matrix4, v: Vec4) =>\n  [dot4(m[0], v), dot4(m[1], v), dot4(m[2], v), dot4(m[3], v)] as const;\n\nexport const multiply4 = (m1: Matrix4, m2: Matrix4) => {\n  const col0 = [m2[0][0], m2[1][0], m2[2][0], m2[3][0]] as const;\n  const col1 = [m2[0][1], m2[1][1], m2[2][1], m2[3][1]] as const;\n  const col2 = [m2[0][2], m2[1][2], m2[2][2], m2[3][2]] as const;\n  const col3 = [m2[0][3], m2[1][3], m2[2][3], m2[3][3]] as const;\n  return [\n    [\n      dot4(m1[0], col0),\n      dot4(m1[0], col1),\n      dot4(m1[0], col2),\n      dot4(m1[0], col3),\n    ],\n    [\n      dot4(m1[1], col0),\n      dot4(m1[1], col1),\n      dot4(m1[1], col2),\n      dot4(m1[1], col3),\n    ],\n    [\n      dot4(m1[2], col0),\n      dot4(m1[2], col1),\n      dot4(m1[2], col2),\n      dot4(m1[2], col3),\n    ],\n    [\n      dot4(m1[3], col0),\n      dot4(m1[3], col1),\n      dot4(m1[3], col2),\n      dot4(m1[3], col3),\n    ],\n  ] as const;\n};\n\nexport const processTransform3d = (transforms: Transforms3d) =>\n  transforms.reduce((acc, transform) => {\n    const key = Object.keys(transform)[0] as Transform3dName;\n    if (key === \"translateX\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, translateXMatrix(value));\n    }\n    if (key === \"translateY\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, translateYMatrix(value));\n    }\n    if (key === \"translateZ\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, translateZMatrix(value));\n    }\n    if (key === \"scale\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, scaleMatrix(value));\n    }\n    if (key === \"scaleX\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, scaleXMatrix(value));\n    }\n    if (key === \"scaleY\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, scaleYMatrix(value));\n    }\n    if (key === \"skewX\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, skewXMatrix(value));\n    }\n    if (key === \"skewY\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, skewYMatrix(value));\n    }\n    if (key === \"rotateX\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, rotateXMatrix(value));\n    }\n    if (key === \"rotateY\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, rotateYMatrix(value));\n    }\n    if (key === \"perspective\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, perspectiveMatrix(value));\n    }\n    if (key === \"rotate\" || key === \"rotateZ\") {\n      const value = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, rotateZMatrix(value));\n    }\n    if (key === \"matrix\") {\n      const matrix = (transform as Pick<Transformations, typeof key>)[key];\n      return multiply4(acc, matrix);\n    }\n    return exhaustiveCheck(key);\n  }, identityMatrix4);\n"]},"metadata":{},"sourceType":"script"}